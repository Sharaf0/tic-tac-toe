(this["webpackJsonptic-tac-toe-5"]=this["webpackJsonptic-tac-toe-5"]||[]).push([[0],{12:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(6),c=n.n(i),o=n(1),l=n(3),u=n.n(l),s={currentPlayerId:-1,playingPlayersCount:function(){throw Error("implement playingPlayersCount")},init:function(){throw Error("implement init")},setNextPlayerId:function(){throw Error("implement setNextPlayerId")},getPlayerName:function(e){throw Error("implement getPlayerName")},setPlayerName:function(e,t){throw Error("implement setPlayerName")},getPlayerSign:function(e){throw Error("implement getPlayerSign")},addScoreToWinner:function(e){throw Error("implement addScoreToWinner")},getPlayersScores:function(){throw Error("implement getPlayersScores")}},m=Object(r.createContext)(s),f=function(e){var t=Object(r.useContext)(m).getPlayerSign,n=void 0!==e.playerId?t(e.playerId):"";return a.a.createElement("button",{className:u.a.square,onClick:e.onClick},n)},d=function(e){return a.a.createElement("div",null,e.scores.sort((function(e,t){return e.name<t.name?-1:1})).map((function(e,t){return a.a.createElement("div",{key:t+1},a.a.createElement("span",null,e.name,": ",e.score))})))},y=function(e,t){return e+","+t},b=function(e,t,n,r,a,i,c){var o=0;do{n+=a,r+=i,o++}while(n>=0&&r>=0&&n<c&&r<c&&e.get(y(n,r))===t);return o},p=function(e){var t=Object(r.useContext)(m),n=t.init,i=t.addScoreToWinner,c=t.getPlayerName,l=t.setNextPlayerId,s=t.getPlayersScores,p=t.currentPlayerId;Object(r.useEffect)((function(){n(e.names)}),[]);var v=Object(r.useState)(null),h=Object(o.a)(v,2),O=h[0],P=h[1],g=Object(r.useState)(new Map),j=Object(o.a)(g,2),E=j[0],w=j[1],S=Object(r.useMemo)((function(){return null===O?null:function(e,t,n,r){if(null===t)return null;var a,i=function(e){var t=e.split(",");return[+t[0],+t[1]]}(t),c=Object(o.a)(i,2),l=c[0],u=c[1],s=e.get(t);if(void 0===s)throw Error("last move must exist in moves");return function(e){e[e.Left=-1]="Left",e[e.Right=1]="Right",e[e.Up=-1]="Up",e[e.Down=1]="Down",e[e.Still=0]="Still"}(a||(a={})),[[[a.Still,a.Left],[a.Still,a.Right]],[[a.Up,a.Still],[a.Down,a.Still]],[[a.Up,a.Right],[a.Down,a.Left]],[[a.Up,a.Left],[a.Down,a.Right]]].some((function(t){var a=Object(o.a)(t,2),i=a[0],c=a[1];return b(e,s,l,u,i[0],i[1],n)-1+(b(e,s,l,u,c[0],c[1],n)-1)+1===r}))?s:null}(E,O,15,5)}),[O,E]);Object(r.useEffect)((function(){null!==S&&i(S)}),[S]);var x=Object(r.useMemo)((function(){return 225===E.size}),[E,O]),C=Object(r.useMemo)((function(){return null!==S||x}),[x,S]),N=Object(r.useCallback)((function(e,t){var n=y(e,t);if(!0!==E.has(n)){P(n);var r=E.set(n,p);w(r),l()}}),[p,E,l]),I=Object(r.useCallback)((function(e){return a.a.createElement("div",{key:e,className:u.a.boardRow},Array(15).fill(0).map((function(t,n){return a.a.createElement(f,{key:n,playerId:E.get(y(e,n)),onClick:function(){return N(e,n)}})})))}),[E,N]),k=-1===p?"":c(p);return a.a.createElement("div",{className:u.a.game},a.a.createElement("div",null,a.a.createElement("span",null,C?x?"Draw!":S?c(S)+" won!":"":"Current Player: ".concat(k))),a.a.createElement("div",{className:u.a.board},C?a.a.createElement("button",{onClick:function(){e.restart(),P(null),w(new Map)}},"Restart"):Array(15).fill(0).map((function(e,t){return I(t)}))),a.a.createElement("div",null,a.a.createElement(d,{scores:s()})))},v=n(2),h=n(4),O=function e(t){Object(h.a)(this,e),this.id=void 0,this.name=void 0,this.score=void 0,this.inPlay=void 0,this.id=e.count++,this.name=t,this.score=0,this.inPlay=!1};O.count=10;var P=function e(t,n){Object(h.a)(this,e),this.name=void 0,this.score=void 0,this.name=t,this.score=n},g=function(){var e=Object(r.useState)(new Array),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(-1),c=Object(o.a)(i,2),l=c[0],u=c[1],s=Object(r.useCallback)((function(e){a(n.map((function(t){return t.id===e?Object(v.a)(Object(v.a)({},t),{},{score:t.score+1}):t})))}),[n]);return{init:function(e){for(var t=n.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{inPlay:!1})})),r=-1,i=function(n){var a=e[n],i=t.findIndex((function(e){return e.name===a}));if(-1===i){var c=new O(a);c.inPlay=!0,t.push(c),-1===r&&(r=c.id)}else{var o=new O(t[i].name);o.id=t[i].id,o.score=t[i].score,o.inPlay=!0,t.splice(i,1),t.push(o),-1===r&&(r=t[i].id)}},c=0;c<e.length;c++)i(c);u(r),a(t)},playingPlayersCount:function(){return n.filter((function(e){return e.inPlay})).length},setNextPlayerId:Object(r.useCallback)((function(){var e=n.filter((function(e){return e.inPlay})).map((function(e){return e.id})),t=e.indexOf(l),r=e[(t+1)%e.length];u(r)}),[l,n,u]),addScoreToWinner:s,getPlayerName:function(e){var t=n.find((function(t){return t.id===e}));if(!t)throw Error("Player with id ".concat(e," does not exist"));return t.name},setPlayerName:function(e,t){a(n.map((function(n){return n.id===e?Object(v.a)(Object(v.a)({},n),{},{name:t}):n})))},getPlayerSign:function(e){return"XO+#^"[n.filter((function(e){return e.inPlay})).findIndex((function(t){return t.id===e}))]},currentPlayerId:l,getPlayersScores:function(){return n.map((function(e){return new P(e.name,e.score)}))}}};var j=function(){var e=Object(r.useState)(2),t=Object(o.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)(!1),l=Object(o.a)(c,2),u=l[0],s=l[1],f=Object(r.useState)(new Array),d=Object(o.a)(f,2),y=d[0],b=d[1],v=function e(t){var n=prompt("Please enter player".concat(t+1," name:"),"Player ".concat(t+1));return null===n||""===n?e(t):n},h=u?a.a.createElement(p,{names:y,restart:function(){s(!1)}}):a.a.createElement("form",{onSubmit:function(e){for(var t=new Array(n),r=0;r<t.length;r++)t[r]=v(r);s(!0),b(t),e.preventDefault()}},a.a.createElement("label",null,"Enter number of players: "),a.a.createElement("input",{type:"number",value:n,min:"1",max:"5",onChange:function(e){var t=parseInt(e.target.value);t&&i(t)}}),a.a.createElement("input",{type:"submit",value:"Submit"}));return a.a.createElement(m.Provider,{value:g()},h)};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(j,null)),document.getElementById("root"))},3:function(e,t,n){e.exports={game:"styles_game__1FVe4",board:"styles_board__o22sn",boardRow:"styles_boardRow__3UDTx",square:"styles_square__1JKAo"}},7:function(e,t,n){e.exports=n(12)}},[[7,1,2]]]);
//# sourceMappingURL=main.e52d283b.chunk.js.map